!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=12)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("styled-components")},function(e,t,n){var o=n(10);e.exports.getVideoData=function(e,t,n,i){o.ajax({url:t,method:"GET",data:{id:e,currUser:"testUser"},success:function(e,t){return n(e,t)},error:function(e,t){return i(e,t)}})},e.exports.isUserSubscribed=function(e,t){for(var n=0;n<t.length;n++)if(t[n].channel===e)return!0;return!1},e.exports.subscribeChange=function(e,t,n,i,r){o.ajax({url:"/watch/subscribe",method:"POST",data:{user:e,channel:t,action:n},success:function(e,t){return i(e,t)},error:function(e,t){return r(e,t)}})},e.exports.readyComments=function(e,t){var n=[];e.sort(function(e,t){return e.parentId-t.parentId});for(var o=0;o<e.length;o++){var i=e[o];if(0===i.parentId)n.push({id:i.id,username:i.username,text:i.text,commentDate:i.commentDate,likes:i.likes,dislikes:i.dislikes,image:i.image,replies:[]});else for(var r=0;r<n.length;r++){if(i.parentId===n[r].id){n[r].replies.push({id:i.id,username:i.username,text:i.text,commentDate:i.commentDate,likes:i.likes,dislikes:i.dislikes,image:i.image});break}for(var s=0;s<n[r].replies.length;s++){var a=n[r].replies[s];if(i.parentId===a.id){n[r].replies.push({id:i.id,username:i.username,text:"@".concat(a.username," ").concat(i.text),commentDate:i.commentDate,likes:i.likes,dislikes:i.dislikes,image:i.image});break}}}}return n.forEach(function(e){e.replies.sort(function(e,t){return new Date(e.commentDate)-new Date(t.commentDate)})}),n.sort(t),n},e.exports.timeSince=function(e){var t=new Date(e),n=new Date,o=Math.floor((n-t)/1e3),i=Math.floor(o/31536e3);return 1===i?"1 year ago":i>1?"".concat(i," years ago"):1===(i=Math.floor(o/2592e3))?"1 month ago":i>1?"".concat(i," months ago"):1===(i=Math.floor(o/86400))?"1 day ago":i>1?"".concat(i," days ago"):1===(i=Math.floor(o/3600))?"1 hour ago":i>1?"".concat(i," hours ago"):1===(i=Math.floor(o/60))?"1 minute ago":i>1?"".concat(i," minutes ago"):"just now"},e.exports.commentPost=function(e,t,n,i,r,s){console.log("post request issued"),o.ajax({url:"/watch/comment",method:"POST",data:{username:e,videoId:t,parentId:n,text:i},success:function(e,t){return r(e,t)},error:function(e,t){return s(e,t)}})},e.exports.commentFeelingPost=function(e,t,n,i,r,s){console.log("post request issued"),o.ajax({url:"/watch/commentFeeling",method:"POST",data:{username:e,commentId:t,action:n,feeling:i},success:function(e,t){return r(e,t)},error:function(e,t){return s(e,t)}})}},function(e,t){e.exports=require("react-dom/server")},function(e,t){e.exports=require("react-lazyload")},function(e,t){e.exports=require("express")},function(e,t,n){var o=n(7),i=o.development,r=n(8)(i);e.exports=r,r.migrate.latest([o])},function(e,t){e.exports={development:{client:"postgresql",connection:{database:"videodetails",user:"postgres",password:""},pool:{min:2,max:10},migrations:{tableName:"knex_migrations"}},test:{client:"postgresql",connection:{database:"videodetails_test2",user:"postgres",password:""},pool:{min:0,max:10},migrations:{tableName:"knex_migrations"}},production:{client:"postgresql",connection:{database:"videodetails",user:"postgres",password:""},pool:{min:2,max:10},migrations:{tableName:"knex_migrations"}}}},function(e,t){e.exports=require("knex")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("jquery")},function(e,t){e.exports=require("body-parser")},function(e,t,n){"use strict";n.r(t);var o=n(0),i=n.n(o),r=n(3),s=n.n(r),a=n(1),l=n.n(a),c=n(2);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function m(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=l.a.button.withConfig({displayName:"subscribe__SubButton",componentId:"sc-54cmnv-0"})(["font-size:14px;font-weight:500px;border:none;width:",";height:",";margin:",";background-color:#218380;color:rgb(255,255,255);letter-spacing:.007px;border-bottom-left-radius:2px;border-bottom-right-radius:2px;border-top-left-radius:2px;border-top-right-radius:2px;cursor:pointer;&:focus{outline:0;}"],function(e){return e.buttonWidth?e.buttonWidth:"105.5px"},function(e){return e.buttonHeight?e.buttonHeight:"36px"},function(e){return e.buttonMargin?e.buttonMargin:"0 0 0 0"}),g=l.a.button.withConfig({displayName:"subscribe__UnSubButton",componentId:"sc-54cmnv-1"})(["font-size:14px;font-weight:500px;border:none;width:",";height:",";margin:",";background-color:rgb(238,238,238);color:rgba(17,17,17,0.6);letter-spacing:.007px;border-bottom-left-radius:2px;border-bottom-right-radius:2px;border-top-left-radius:2px;border-top-right-radius:2px;cursor:pointer;&:focus{outline:0;}"],function(e){return e.buttonWidth?e.buttonWidth:"105.5px"},function(e){return e.buttonHeight?e.buttonHeight:"36px"},function(e){return e.buttonMargin?e.buttonMargin:"0 0 0 0"}),b=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=m(this,d(t).call(this,e))).state={subscribed:e.userSubscribes},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,i.a.Component),n=t,(o=[{key:"handleSubscribeClick",value:function(){"local"===this.props.handleSubscribe?this.setState({subscribed:!this.state.subscribed}):this.props.handleSubscribe("subscribe"),Object(c.subscribeChange)("testUser",this.props.channel,"subscribe",function(e,t){},function(){return console.log("there was a problem")})}},{key:"handleUnsubscribeClick",value:function(){"local"===this.props.handleSubscribe?this.setState({subscribed:!this.state.subscribed}):this.props.handleSubscribe("unsubscribe"),Object(c.subscribeChange)("testUser",this.props.channel,"unsubscribe",function(e,t){},function(){return console.log("there was a problem")})}},{key:"render",value:function(){return this.state.subscribed?i.a.createElement(g,{buttonWidth:this.props.buttonWidth,buttonHeight:this.props.buttonHeight,buttonMargin:this.props.buttonMargin,type:"button",onClick:this.handleUnsubscribeClick.bind(this)},"SUBSCRIBED"):i.a.createElement(f,{buttonWidth:this.props.buttonWidth,buttonHeight:this.props.buttonHeight,buttonMargin:this.props.buttonMargin,type:"button",onClick:this.handleSubscribeClick.bind(this)},"SUBSCRIBE")}}])&&p(n.prototype,o),r&&p(n,r),t}(),y=function(e){var t=new Date(e.publishDate),n=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(t),o=l.a.div.withConfig({displayName:"channel__Container",componentId:"sc-1s4u3ln-0"})(["box-sizing:border-box;width:100%;border-top:0.5px solid rgba(17,17,17,0.6);display:flex;flex-direction:row;margin-bottom:12px;padding-top:16px;align-items:center;"]),r=l.a.div.withConfig({displayName:"channel__ChannelDetails",componentId:"sc-1s4u3ln-1"})(["display:flex;flex-direction:row;flex-basis:.0001px;flex-grow:1;flex-shrink:1;"]),s=l.a.div.withConfig({displayName:"channel__ImageContainer",componentId:"sc-1s4u3ln-2"})(["display:inline-block;height:48px;width:48px;margin-right:16px;"]),a=l.a.img.withConfig({displayName:"channel__Image",componentId:"sc-1s4u3ln-3"})(["width:100%;height:100%;border-radius:25%;object-fit:cover;"]),c=l.a.div.withConfig({displayName:"channel__NameAndDate",componentId:"sc-1s4u3ln-4"})(["flex-direction:column;justify-content:center;flex-basis:.0001px;flex-grow:1;flex-shrink:1;"]),u=l.a.div.withConfig({displayName:"channel__UserChannel",componentId:"sc-1s4u3ln-5"})(["color:rgb(10,10,10);font-weight:500;line-height:18px;white-space:nowrap;margin-right:10px;"]),p=l.a.div.withConfig({displayName:"channel__PublishDate",componentId:"sc-1s4u3ln-6"})(["color:rgba(17,17,17,0.6);font-size:13px;font-weight:400;line-height:16px;"]);return i.a.createElement(o,null,i.a.createElement(r,null,i.a.createElement(s,null,i.a.createElement(a,{src:e.image,alt:"Profile Pic"})),i.a.createElement(c,null,i.a.createElement(u,null,e.channel,i.a.createElement(p,null,"Published on ".concat(n)))),i.a.createElement(b,{buttonMargin:"0 10px 0 0",channel:e.channel,userSubscribes:e.userSubscribes,handleSubscribe:e.handleSubscribe})))},w=function(e){var t=l.a.div.withConfig({displayName:"suggestion__SuggestionContainer",componentId:"ed3c5i-0"})(["box-sizing:border box;display:flex;flex-direction:column;min-width:210px;height:124px;justify-content:center;align-items:center;margin:3px;color:rgb(10,10,10);font-weight:500;white-space:nowrap;"]),n=l.a.div.withConfig({displayName:"suggestion__Image",componentId:"ed3c5i-1"})(["background-image:url(",");display:block;width:100%;height:56px;background-size:cover;background-position:center center;margin-bottom:10px;"],function(e){return e.url}),o=l.a.div.withConfig({displayName:"suggestion__Channel",componentId:"ed3c5i-2"})(["margin-bottom:10px;"]),r=l.a.div.withConfig({displayName:"suggestion__ButtonContainerA",componentId:"ed3c5i-3"})(["width:105.5px;max-height:20px;font-weight:500px;"]);return i.a.createElement(t,null,i.a.createElement(n,{url:e.image}),i.a.createElement(o,null,e.channel),i.a.createElement(r,null,i.a.createElement(b,{buttonHeight:"24px",channel:e.channel,userSubscribes:!1,handleSubscribe:"local"})))},x=function(e){var t=l.a.a.withConfig({displayName:"scrollButtons__ScrollButton",componentId:"o09gka-0"})(["position:absolute;bottom:45px;font-size:28px;color:rgb(144,144,144);background-color:rgb(238,238,238);-webkit-appearance:none;-webkit-box-shadow:0 3px 10px grey;-moz-box-shadow:0 3px 10px grey;box-shadow:0 3px 10px grey;text-align:center;vertical-align:middle;line-height:40px;width:40px;height:40px;border-radius:100%;cursor:pointer;&:focus{outline:0;}"]),n=l.a.div.withConfig({displayName:"scrollButtons__Container",componentId:"o09gka-1"})(["position:relative;"]),o=i.a.createElement(t,{style:{left:"-10px"},onClick:function(){return e.scroll("left")}},"‹"),r=i.a.createElement(t,{style:{right:"-10px"},onClick:function(){return e.scroll("right")}},"›"),s=[];return e.canScrollLeft&&s.push(o),e.canScrollRight&&s.push(r),i.a.createElement(n,null,s)};function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var E=l.a.div.withConfig({displayName:"suggestions__Container",componentId:"n4hbei-0"})(["position:relative;width:100%;margin-bottom:10px;"]),I=l.a.a.withConfig({displayName:"suggestions__CloseButton",componentId:"n4hbei-1"})(["position:absolute;-webkit-appearance:none;border:none;top:-5px;right:0px;text-align:center;vertical-align:middle;font-family:sans-serif;font-size:28px;font-weight:100;color:rgb(144,144,144);line-height:40px;width:40px;height:40px;cursor:pointer;&:focus{outline:0;}"]),O=l.a.div.withConfig({displayName:"suggestions__SuggestionContainer",componentId:"n4hbei-2"})(["display:flex;flex-direction:row;overflow-x:auto;&::-webkit-scrollbar{display:none;}"]),j=l.a.h1.withConfig({displayName:"suggestions__Heading",componentId:"n4hbei-3"})(["font-size:16px;display:block;line-height:20px;margin-bottom:16px;margin-top:16px;margin-left:20px;"]),D=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=C(t).call(this,e))||"object"!==v(r)&&"function"!=typeof r?_(o):r).suggestions=i.a.createRef(),n.scroll=n.scroll.bind(_(_(n))),n.state={placeholder:null,canScrollRight:!0,canScrollLeft:!1},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,i.a.Component),n=t,(o=[{key:"scroll",value:function(e){var t,n=this,o="right"===e?15:-15,i=0;t=setInterval(function(){if(i>=631)return clearInterval(t),void n.checkScrollStatus();n.suggestions.current.scrollLeft+=o,i+=Math.abs(o)},5)}},{key:"checkScrollStatus",value:function(){0===this.suggestions.current.scrollLeft?this.setState({canScrollLeft:!1}):this.setState({canScrollLeft:!0}),this.suggestions.current.scrollWidth-this.suggestions.current.offsetWidth-this.suggestions.current.scrollLeft<1?this.setState({canScrollRight:!1}):this.setState({canScrollRight:!0})}},{key:"componentDidMount",value:function(){this.checkScrollStatus()}},{key:"render",value:function(){for(var e=this,t=[],n=0;n<this.props.suggestions.length;n++){var o=this.props.suggestions[n];t.push(i.a.createElement(w,{channel:o.selectedChannel,image:o.selectedChannelImage}))}return i.a.createElement(E,null,i.a.createElement(j,null,"Recommended for you"),i.a.createElement(I,{onClick:function(){return e.props.handleSuggestionClose()}},"×"),i.a.createElement(O,{ref:this.suggestions},t),i.a.createElement(x,{scroll:this.scroll,canScrollLeft:this.state.canScrollLeft,canScrollRight:this.state.canScrollRight}))}}])&&k(n.prototype,o),r&&k(n,r),t}(),P=l.a.div.withConfig({displayName:"description__Container",componentId:"zzx11x-0"})(["box-sizing:border-box;white-space:pre-wrap;max-width:742px;line-height:21px;padding:0 10px 0 68px;"]),R=l.a.div.withConfig({displayName:"description__DescBlock",componentId:"zzx11x-1"})(["max-height:",";overflow-y:hidden;color:rgb(10,10,10);margin-bottom:10px;"],function(e){return e.collapse?"65px":"auto"}),N=l.a.span.withConfig({displayName:"description__ShowView",componentId:"zzx11x-2"})(["color:rgba(17,17,17,0.6);font-size:13px;font-weight:500;cursor:pointer;"]),T=function(e){return i.a.createElement(P,null,i.a.createElement(R,{collapse:e.collapseView},e.desc),i.a.createElement(N,{onClick:function(){return e.handleShowClick()}},e.collapseView?"SHOW MORE":"SHOW LESS"))};function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var L=l.a.div.withConfig({displayName:"commentForm__AddCommentContainer",componentId:"sc-1m3ihl0-0"})(["box-sizing:border-box;width:100%;display:flex;flex-direction:row;margin-bottom:16px;padding-top:8px;align-items:flex-start;"]),M=l.a.div.withConfig({displayName:"commentForm__ImageContainer",componentId:"sc-1m3ihl0-1"})(["display:inline-block;height:",";width:",";margin-left:4px;margin-right:16px;flex-grow:0;flex-shrink:0;"],function(e){return e.imageSize?e.imageSize:"40px"},function(e){return e.imageSize?e.imageSize:"40px"}),A=l.a.img.withConfig({displayName:"commentForm__UserImage",componentId:"sc-1m3ihl0-2"})(["width:100%;height:100%;border-radius:25%;object-fit:cover;"]),H=l.a.form.withConfig({displayName:"commentForm__NewComment",componentId:"sc-1m3ihl0-3"})(["position:relative;top:0;left:0;width:100%;max-width:828px;"]),V=l.a.div.withConfig({displayName:"commentForm__Underline",componentId:"sc-1m3ihl0-4"})(["background-color:rgba(17,17,17,0.6);height:2px;display:inline-block;transform:scale(0,1);transition:all 0.3s linear;width:100%;position:absolute;top:24px;left:0;z-index:1;"]),W=l.a.div.withConfig({displayName:"commentForm__LightUnderline",componentId:"sc-1m3ihl0-5"})(["background-color:rgb(144,144,144);height:1px;display:inline-block;width:100%;position:absolute;top:24px;left:0;"]),J=l.a.input.withConfig({displayName:"commentForm__CommentInput",componentId:"sc-1m3ihl0-6"})(["display:block;position:relative;margin-bottom:0;min-width:100%;outline:none;border:none;line-height:21px;color:rgba(17,17,17,0.6);cursor:text;font-family:Roboto,Arial,sans-serif;font-size:14px;font-weight:400;&:focus{color:rgb(10,10,10);}&:focus ~ ","{transform:scale(1);}"],V),Y=l.a.div.withConfig({displayName:"commentForm__Submissions",componentId:"sc-1m3ihl0-7"})(["display:flex;flex-direction:row;justify-content:flex-end;margin-top:10px;width:100%;margin-bottom:-20px;"]),G=l.a.input.withConfig({displayName:"commentForm__CancelSubmit",componentId:"sc-1m3ihl0-8"})(["font-size:14px;font-weight:500px;border:none;width:100px;height:36px;margin:0 0 0 0;color:rgb(96,96,96);letter-spacing:.007px;border-bottom-left-radius:2px;border-bottom-right-radius:2px;border-top-left-radius:2px;border-top-right-radius:2px;cursor:pointer;&:focus{outline:0;}"]),K=l.a.input.withConfig({displayName:"commentForm__CommentSubmit",componentId:"sc-1m3ihl0-9"})(["font-size:14px;font-weight:500px;border:none;width:100px;height:36px;margin:0 0 0 0;background-color:rgb(6,95,212);color:rgb(255,255,255);letter-spacing:.007px;border-bottom-left-radius:2px;border-bottom-right-radius:2px;border-top-left-radius:2px;border-top-right-radius:2px;cursor:pointer;&:focus{outline:0;}"]),Q=function(e){function t(e){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=z(t).call(this,e))||"object"!==U(i)&&"function"!=typeof i?B(o):i).state={focus:!!n.props.focus,value:""},n.parentId=n.props.id||0,n.onFocus=n.onFocus.bind(B(B(n))),n.onBlur=n.onBlur.bind(B(B(n))),n.handleChange=n.handleChange.bind(B(B(n))),n.handleSubmit=n.handleSubmit.bind(B(B(n))),n.handleCancel=n.handleCancel.bind(B(B(n))),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(t,i.a.Component),n=t,(o=[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this,n=(new Date).toUTCString(),o=this.state.value;Object(c.commentPost)("testUser",this.props.video,this.parentId,this.state.value,function(e,i){var r={id:e[0],username:"testUser",text:o,commentDate:n,likes:0,dislikes:0,image:t.props.userImage,replies:[]};t.props.prependUserComment(r)},function(e,t){console.log(e,t)}),this.setState({value:""}),e.preventDefault()}},{key:"handleCancel",value:function(){this.setState({focus:!1,value:""}),this.props.cancel&&this.props.cancel()}},{key:"onFocus",value:function(){this.props.default?this.setState({focus:!0,value:this.props.default}):this.setState({focus:!0})}},{key:"onBlur",value:function(){this.setState({focus:!1})}},{key:"render",value:function(){return i.a.createElement(L,null,i.a.createElement(M,{imageSize:this.props.imageSize},i.a.createElement(A,{src:this.props.userImage})),i.a.createElement(H,{onSubmit:this.handleSubmit,onFocus:this.onFocus},i.a.createElement(J,{autoFocus:this.state.focus,type:"text",value:this.state.value,onChange:this.handleChange,placeholder:"Add a public comment..."}),i.a.createElement(V,null),i.a.createElement(W,null),this.state.focus&&i.a.createElement(Y,null,i.a.createElement(G,{onClick:this.handleCancel,readOnly:!0,value:"CANCEL"}),i.a.createElement(K,{type:"submit",readOnly:!0,value:"COMMENT"}))))}}])&&F(n.prototype,o),r&&F(n,r),t}(),X=function(e){var t=l.a.div.withConfig({displayName:"sortSelect__SortSelection",componentId:"sc-5e2cye-0"})(["display:flex;z-index:1;flex-direction:column;position:absolute;top:35px;font-family:Roboto,Arial,sans-serif;font-size:14px;font-weight:400;background:rgb(255,255,255);border-radius:10%;width:100px;height:40px;&:focus{outline:0;}"]),n=l.a.input.withConfig({displayName:"sortSelect__Option",componentId:"sc-5e2cye-1"})(["font-family:Roboto,Arial,sans-serif;box-shadow:3px 3px grey;border-top:5px solid rgb(6,95,212);cursor:pointer;font-size:14px;font-weight:400;background:rgb(255,255,255);border-radius:5%;width:120px;min-height:40px;text-align:center;&:focus{outline:0;}&:hover{background:rgb(238,238,238);}"]);return i.a.createElement(t,null,i.a.createElement(n,{readOnly:!0,autoFocus:!0,onBlur:e.onSortBlur,onClick:function(){e.sortByLikes(),e.onSortBlur()},value:"Top Comments"}),i.a.createElement(n,{readOnly:!0,onMouseDown:e.sortByDate,value:"Newest First"}))};function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function te(e,t){return(te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var oe=l.a.div.withConfig({displayName:"commentHead__Container",componentId:"njbbq7-0"})(["height:40px;margin-top:16px;margin-bottom:16px;border-top:0.5px solid rgba(17,17,17,0.6);padding-top:16px;font-size:16px;width:100%;align-items:center;display:flex;flex-direction:row;"]),ie=l.a.div.withConfig({displayName:"commentHead__CommentCount",componentId:"njbbq7-1"})(["display:inline-block;margin-right:40px;"]),re=l.a.div.withConfig({displayName:"commentHead__SortContainer",componentId:"njbbq7-2"})(["position:relative;display:flex;height:100%;flex-direction:row;align-items:center;cursor:pointer;"]),se=l.a.img.withConfig({displayName:"commentHead__SortIcon",componentId:"njbbq7-3"})(["display:inline-block;max-height:100%;object-fit:cover;margin-right:5px;"]),ae=l.a.div.withConfig({displayName:"commentHead__SortText",componentId:"njbbq7-4"})(["display:inline-block;font-size:14px;color:rgb(96,96,96);"]),le=function(e){function t(e){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=ee(t).call(this,e))||"object"!==Z(i)&&"function"!=typeof i?ne(o):i).state={showSort:!1},n.onSortFocus=n.onSortFocus.bind(ne(ne(n))),n.onSortBlur=n.onSortBlur.bind(ne(ne(n))),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&te(e,t)}(t,i.a.Component),n=t,(o=[{key:"onSortFocus",value:function(){this.setState({showSort:!0})}},{key:"onSortBlur",value:function(){var e=this;setTimeout(function(){e.setState({showSort:!1})},0)}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(oe,null,i.a.createElement(ie,null,"".concat(this.props.commentCount," Comments")),i.a.createElement(re,{onClick:this.onSortFocus},i.a.createElement(se,{src:"/images/sort_grey_48x48.png"}),i.a.createElement(ae,null,"SORT BY"),this.state.showSort&&i.a.createElement(X,{sortByDate:this.props.sortByDate,sortByLikes:this.props.sortByLikes,onSortBlur:this.onSortBlur}))),i.a.createElement(Q,{video:this.props.video,prependUserComment:this.props.prependUserComment,userImage:this.props.userImage}))}}])&&$(n.prototype,o),r&&$(n,r),t}();function ce(e){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ue(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function me(e,t){return(me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function de(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var he=l.a.div.withConfig({displayName:"reply__Container",componentId:"sc-1ok1t2u-0"})(["box-sizing:border-box;width:100%;display:flex;flex-direction:row;margin-bottom:8px;padding-top:16px;align-items:top;"]),fe=l.a.div.withConfig({displayName:"reply__ReplyContainer",componentId:"sc-1ok1t2u-1"})(["display:flex;flex-direction:column;width:100%;"]),ge=l.a.div.withConfig({displayName:"reply__ImageContainer",componentId:"sc-1ok1t2u-2"})(["display:inline-block;height:24px;width:24px;margin-left:4px;margin-right:16px;flex-grow:0;flex-shrink:0;"]),be=l.a.img.withConfig({displayName:"reply__Image",componentId:"sc-1ok1t2u-3"})(["width:100%;height:100%;border-radius:25%;object-fit:cover;"]),ye=l.a.div.withConfig({displayName:"reply__NameAndDate",componentId:"sc-1ok1t2u-4"})(["display:flex;flex-direction:row;align-items:center;margin-bottom:4px;"]),we=l.a.div.withConfig({displayName:"reply__ReplyText",componentId:"sc-1ok1t2u-5"})(["color:rgb(17,17,17);line-height:20px;margin-right:10px;white-space:pre-wrap;margin-bottom:6px;"]),xe=l.a.div.withConfig({displayName:"reply__ReplyingUser",componentId:"sc-1ok1t2u-6"})(["font-size:13px;font-weight:500;margin-right:5px;line-height:18px;"]),ve=l.a.div.withConfig({displayName:"reply__PublishDate",componentId:"sc-1ok1t2u-7"})(["color:rgb(96,96,96);font-size:13px;font-weight:400;line-height:16px;"]),ke=l.a.div.withConfig({displayName:"reply__Actions",componentId:"sc-1ok1t2u-8"})(["display:flex;flex-direction:row;align-items:center;margin-bottom:10px;height:26px;"]),Ce=l.a.img.withConfig({displayName:"reply__LikeDislike",componentId:"sc-1ok1t2u-9"})(["display:inline-block;max-height:60%;object-fit:cover;margin-right:5px;cursor:pointer;filter:",";"],function(e){return e.filter}),Se=l.a.div.withConfig({displayName:"reply__LikeCount",componentId:"sc-1ok1t2u-10"})(["display:inline-block;color:rgb(96,96,96);font-size:13px;font-weight:400;width:50px;"]),_e=l.a.div.withConfig({displayName:"reply__ReplyButton",componentId:"sc-1ok1t2u-11"})(["display:inline-block;margin-left:20px;color:rgb(96,96,96);font-size:13px;font-weight:400;cursor:pointer;"]),Ee=l.a.div.withConfig({displayName:"reply__RepliesContainer",componentId:"sc-1ok1t2u-12"})(["display:block;width:100%;"]),Ie=function(e){function t(e){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=pe(t).call(this,e))||"object"!==ce(i)&&"function"!=typeof i?de(o):i).state={collapse:!0,newLike:0,newDislike:0},n.prepReply=n.prepReply.bind(de(de(n))),n.cancelReply=n.cancelReply.bind(de(de(n))),n.likeToggle=n.likeToggle.bind(de(de(n))),n.dislikeToggle=n.dislikeToggle.bind(de(de(n))),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}(t,i.a.Component),n=t,(o=[{key:"prepReply",value:function(){this.setState({collapse:!1})}},{key:"cancelReply",value:function(){this.setState({collapse:!0})}},{key:"likeToggle",value:function(){var e,t=0===(e=this.props.liked?0===this.state.newLike?-1:0:0===this.state.newLike?1:0)?this.props.liked:!this.props.liked;Object(c.commentFeelingPost)("testUser",this.props.id,"like",t,function(e,t){console.log(e)},function(e,t){console.log("there was an issue")}),this.setState({newLike:e})}},{key:"dislikeToggle",value:function(){var e,t=0===(e=this.props.disliked?0===this.state.newDislike?-1:0:0===this.state.newDislike?1:0)?this.props.disliked:!this.props.disliked;Object(c.commentFeelingPost)("testUser",this.props.id,"dislike",t,function(e,t){console.log(e)},function(e,t){console.log("there was an issue")}),this.setState({newDislike:e})}},{key:"render",value:function(){var e,t;return e=(0===this.state.newLike?this.props.liked:!this.props.liked)?"invert(23%) sepia(64%) saturate(4654%) hue-rotate(207deg) brightness(91%) contrast(95%)":"invert(57%) sepia(6%) saturate(7%) hue-rotate(316deg) brightness(99%) contrast(89%)",t=(0===this.state.newDislike?this.props.disliked:!this.props.disliked)?"invert(23%) sepia(64%) saturate(4654%) hue-rotate(207deg) brightness(91%) contrast(95%)":"invert(57%) sepia(6%) saturate(7%) hue-rotate(316deg) brightness(99%) contrast(89%)",i.a.createElement(he,null,i.a.createElement(ge,null,i.a.createElement(be,{src:this.props.image})),i.a.createElement(fe,null,i.a.createElement(ye,null,i.a.createElement(xe,null,this.props.username),i.a.createElement(ve,null,Object(c.timeSince)(this.props.commentDate))),i.a.createElement(we,null,this.props.text),i.a.createElement(ke,null,i.a.createElement(Ce,{onClick:this.likeToggle,filter:e,src:"/images/up.svg"}),i.a.createElement(Se,null,this.props.likes+this.state.newLike),i.a.createElement(Ce,{onClick:this.dislikeToggle,filter:t,src:"/images/down.svg"}),i.a.createElement(_e,{onClick:this.prepReply},"REPLY")),i.a.createElement(Ee,null,!this.state.collapse&&i.a.createElement(Q,{default:"@".concat(this.props.username,": "),focus:"true",imageSize:"24px",id:this.props.id,video:this.props.video,prependUserComment:this.props.prependUserReply,cancel:this.cancelReply,userImage:this.props.userImage}))))}}])&&ue(n.prototype,o),r&&ue(n,r),t}();function Oe(e){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pe(e,t){return(Pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Ne=l.a.div.withConfig({displayName:"replies__Toggle",componentId:"y8531w-0"})(["font-size:14px;font-weight:500;margin-top:8px;margin-bottom:2px;line-height:16px;cursor:pointer;"]),Te=function(e){function t(e){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=De(t).call(this,e))||"object"!==Oe(i)&&"function"!=typeof i?Re(o):i).state={showReplies:!1},n.showReplies=n.showReplies.bind(Re(Re(n))),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pe(e,t)}(t,i.a.Component),n=t,(o=[{key:"showReplies",value:function(){this.setState({showReplies:!this.state.showReplies})}},{key:"render",value:function(){for(var e=[],t=this.props.replies.length,n=0;n<t;n++){for(var o=this.props.replies[n],r=!1,s=!1,a=0;a<this.props.userCommentFeelings.length;a++)this.props.userCommentFeelings[a].commentId===o.id&&(this.props.userCommentFeelings[a].feeling?r=!0:s=!0);e.push(i.a.createElement(Ie,{prependUserReply:this.props.prependUserReply,liked:r,disliked:s,userImage:this.props.userImage,video:o.videoId,id:o.id,image:o.image,username:o.username,commentDate:o.commentDate,likes:o.likes,dislikes:o.dislikes,text:o.text}))}return this.state.showReplies?i.a.createElement("div",null,i.a.createElement(Ne,{onClick:this.showReplies},"Hide replies ⋀"),e):i.a.createElement("div",null,i.a.createElement(Ne,{onClick:this.showReplies},"View ".concat(t," replies ⋁")))}}])&&je(n.prototype,o),r&&je(n,r),t}(),Ue=n(4),Fe=n.n(Ue);function ze(e){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qe(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Be(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Le(e){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Me(e,t){return(Me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var He=l.a.div.withConfig({displayName:"comment__Container",componentId:"sc-1ojxyoq-0"})(["box-sizing:border-box;width:100%;display:flex;flex-direction:row;margin-bottom:12px;padding-top:16px;align-items:top;"]),Ve=l.a.div.withConfig({displayName:"comment__CommentContainer",componentId:"sc-1ojxyoq-1"})(["width:100%;display:flex;flex-direction:column;"]),We=l.a.div.withConfig({displayName:"comment__ImageContainer",componentId:"sc-1ojxyoq-2"})(["display:inline-block;height:40px;width:40px;margin-left:4px;margin-right:16px;flex-grow:0;flex-shrink:0;"]),Je=l.a.img.withConfig({displayName:"comment__Image",componentId:"sc-1ojxyoq-3"})(["width:100%;height:100%;border-radius:25%;object-fit:cover;"]),Ye=l.a.div.withConfig({displayName:"comment__NameAndDate",componentId:"sc-1ojxyoq-4"})(["display:flex;flex-direction:row;align-items:center;margin-bottom:4px;"]),Ge=l.a.div.withConfig({displayName:"comment__CommentText",componentId:"sc-1ojxyoq-5"})(["color:rgb(17,17,17);line-height:20px;margin-right:10px;white-space:pre-wrap;margin-bottom:6px;"]),Ke=l.a.div.withConfig({displayName:"comment__CommentingUser",componentId:"sc-1ojxyoq-6"})(["font-size:13px;font-weight:500;margin-right:5px;line-height:18px;"]),Qe=l.a.div.withConfig({displayName:"comment__PublishDate",componentId:"sc-1ojxyoq-7"})(["color:rgb(96,96,96);font-size:13px;font-weight:400;line-height:16px;"]),Xe=l.a.div.withConfig({displayName:"comment__Actions",componentId:"sc-1ojxyoq-8"})(["display:flex;flex-direction:row;align-items:center;height:26px;"]),Ze=l.a.img.withConfig({displayName:"comment__LikeDislike",componentId:"sc-1ojxyoq-9"})(["display:inline-block;max-height:60%;object-fit:cover;margin-right:5px;cursor:pointer;filter:",";"],function(e){return e.filter}),$e=l.a.div.withConfig({displayName:"comment__LikeCount",componentId:"sc-1ojxyoq-10"})(["display:inline-block;color:rgb(96,96,96);font-size:13px;font-weight:400;width:50px;"]),et=l.a.div.withConfig({displayName:"comment__Reply",componentId:"sc-1ojxyoq-11"})(["display:inline-block;margin-left:20px;color:rgb(96,96,96);font-size:13px;font-weight:400;cursor:pointer;"]),tt=l.a.div.withConfig({displayName:"comment__RepliesContainer",componentId:"sc-1ojxyoq-12"})(["display:block;width:100%;"]),nt=function(e){function t(e){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=Le(t).call(this,e))||"object"!==ze(i)&&"function"!=typeof i?Ae(o):i).state={collapse:!0,newReplies:[],newDislike:0,newLike:0},n.prepReply=n.prepReply.bind(Ae(Ae(n))),n.cancelReply=n.cancelReply.bind(Ae(Ae(n))),n.prependUserReply=n.prependUserReply.bind(Ae(Ae(n))),n.likeToggle=n.likeToggle.bind(Ae(Ae(n))),n.dislikeToggle=n.dislikeToggle.bind(Ae(Ae(n))),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Me(e,t)}(t,i.a.Component),n=t,(o=[{key:"prepReply",value:function(){this.setState({collapse:!1})}},{key:"cancelReply",value:function(){this.setState({collapse:!0})}},{key:"prependUserReply",value:function(e){this.setState({newReplies:[e].concat(qe(this.state.newReplies))}),this.props.prependUserComment()}},{key:"likeToggle",value:function(){var e,t=0===(e=this.props.liked?0===this.state.newLike?-1:0:0===this.state.newLike?1:0)?this.props.liked:!this.props.liked;Object(c.commentFeelingPost)("testUser",this.props.id,"like",t,function(e,t){console.log(e)},function(e,t){console.log("there was an issue")}),this.setState({newLike:e})}},{key:"dislikeToggle",value:function(){var e,t=0===(e=this.props.disliked?0===this.state.newDislike?-1:0:0===this.state.newDislike?1:0)?this.props.disliked:!this.props.disliked;Object(c.commentFeelingPost)("testUser",this.props.id,"dislike",t,function(e,t){console.log(e)},function(e,t){console.log("there was an issue")}),this.setState({newDislike:e})}},{key:"render",value:function(){var e,t;e=(0===this.state.newLike?this.props.liked:!this.props.liked)?"invert(23%) sepia(64%) saturate(4654%) hue-rotate(207deg) brightness(91%) contrast(95%)":"invert(57%) sepia(6%) saturate(7%) hue-rotate(316deg) brightness(99%) contrast(89%)",t=(0===this.state.newDislike?this.props.disliked:!this.props.disliked)?"invert(23%) sepia(64%) saturate(4654%) hue-rotate(207deg) brightness(91%) contrast(95%)":"invert(57%) sepia(6%) saturate(7%) hue-rotate(316deg) brightness(99%) contrast(89%)";var n=0===this.state.newReplies.length?this.props.replies:[].concat(qe(this.props.replies),qe(this.state.newReplies));return i.a.createElement(He,null,i.a.createElement(We,null,i.a.createElement(Fe.a,null,i.a.createElement(Je,{src:this.props.image}))),i.a.createElement(Ve,null,i.a.createElement(Ye,null,i.a.createElement(Ke,null,this.props.username),i.a.createElement(Qe,null,Object(c.timeSince)(this.props.commentDate))),i.a.createElement(Ge,null,this.props.text),i.a.createElement(Xe,null,i.a.createElement(Ze,{onClick:this.likeToggle,filter:e,src:"/images/up.svg"}),i.a.createElement($e,null,this.props.likes+this.state.newLike),i.a.createElement(Ze,{onClick:this.dislikeToggle,filter:t,src:"/images/down.svg"}),i.a.createElement(et,{onClick:this.prepReply},"REPLY")),i.a.createElement(tt,null,!this.state.collapse&&i.a.createElement(Q,{focus:"true",imageSize:"24px",id:this.props.id,video:this.props.video,prependUserComment:this.prependUserReply,cancel:this.cancelReply,userImage:this.props.userImage}),this.props.replies.length>0&&i.a.createElement(Te,{userCommentFeelings:this.props.userCommentFeelings,prependUserReply:this.prependUserReply,id:this.props.id,replies:n,userImage:this.props.userImage}))))}}])&&Be(n.prototype,o),r&&Be(n,r),t}(),ot=function(e){for(var t=[],n=0;n<e.userPosts.length;n++){var o=e.userPosts[n];t.push(i.a.createElement(nt,{liked:!1,disliked:!1,id:o.id,video:e.video,prependUserComment:e.prependUserComment,image:o.image,userImage:e.userImage,username:o.username,commentDate:o.commentDate,likes:o.likes,dislikes:o.dislikes,text:o.text,replies:o.replies}))}for(var r=0;r<e.commentData.length;r++){for(var s=e.commentData[r],a=!1,l=!1,c=0;c<e.userCommentFeelings.length;c++)e.userCommentFeelings[c].commentId===s.id&&(e.userCommentFeelings[c].feeling?a=!0:l=!0);t.push(i.a.createElement(nt,{liked:a,disliked:l,id:s.id,video:e.video,prependUserComment:e.prependUserComment,image:s.image,userImage:e.userImage,username:s.username,commentDate:s.commentDate,likes:s.likes,dislikes:s.dislikes,text:s.text,replies:s.replies,userCommentFeelings:e.userCommentFeelings}))}return i.a.createElement("div",null,t)};function it(e){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function st(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function at(e){return(at=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lt(e,t){return(lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ct(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var ut=function(e){function t(e){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=at(t).call(this,e))||"object"!==it(i)&&"function"!=typeof i?ct(o):i).state={sortMethod:"date",userPosts:[],newCommentCount:0},n.commentData=n.props.commentData,n.prependUserComment=n.prependUserComment.bind(ct(ct(n))),n.sortByLikes=n.sortByLikes.bind(ct(ct(n))),n.sortByDate=n.sortByDate.bind(ct(ct(n))),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lt(e,t)}(t,i.a.Component),n=t,(o=[{key:"prependUserComment",value:function(e){e?this.setState({userPosts:[e].concat(rt(this.state.userPosts)),commentCount:this.state.commentCount+1}):this.setState({commentCount:this.state.commentCount+1})}},{key:"sortByLikes",value:function(){this.setState({sortMethod:"likes"})}},{key:"sortByDate",value:function(){this.setState({sortMethod:"date"})}},{key:"render",value:function(){var e;return e="date"===this.state.sortMethod?Object(c.readyComments)(this.props.commentData,function(e,t){return new Date(t.commentDate)-new Date(e.commentDate)}):Object(c.readyComments)(this.props.commentData,function(e,t){return t.likes-e.likes}),i.a.createElement("div",null,i.a.createElement(le,{sortByDate:this.sortByDate,sortByLikes:this.sortByLikes,video:this.props.video,userImage:this.props.userImage,prependUserComment:this.prependUserComment,commentCount:this.props.commentData.length+this.state.newCommentCount}),i.a.createElement(ot,{video:this.props.video,prependUserComment:this.prependUserComment,commentData:e,userImage:this.props.userImage,userPosts:this.state.userPosts,userCommentFeelings:this.props.userCommentFeelings}))}}])&&st(n.prototype,o),r&&st(n,r),t}();function pt(e){return(pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function dt(e){return(dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ht(e,t){return(ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ft(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var gt=l.a.div.withConfig({displayName:"main__TopContainer",componentId:"sc-13ti80-0"})(["box-sizing:border-box;font-family:Roboto,Arial,sans-serif;font-size:14px;font-weight:400;width:100%;max-width:924px;padding-left:20px;margin-top:12px;padding-right:16px;"]),bt=function(e){function t(e){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=dt(t).call(this,e))||"object"!==pt(i)&&"function"!=typeof i?ft(o):i).state={subscribed:n.props.subscribed,suggestions:null,collapseView:!0},n.handleSubscribe=n.handleSubscribe.bind(ft(ft(n))),n.handleSuggestionClose=n.handleSuggestionClose.bind(ft(ft(n))),n.handleShowClick=n.handleShowClick.bind(ft(ft(n))),n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ht(e,t)}(t,i.a.Component),n=t,(o=[{key:"handleShowClick",value:function(){this.setState({collapseView:!this.state.collapseView})}},{key:"handleSuggestionClose",value:function(){this.setState({suggestions:null})}},{key:"handleSubscribe",value:function(e){var t=this;"unsubscribe"===e?this.setState({suggestions:null,subscribed:!1}):Object(c.getVideoData)(this.props.videoData.videoDetails.channel,"/watch/suggestions",function(e){t.setState({suggestions:e,subscribed:!0})},function(e,t){console.log("err: ",e,"errDesc: ",t)})}},{key:"render",value:function(){var e=this.props.videoData.videoDetails;return this.state.suggestions?i.a.createElement(gt,null,i.a.createElement(D,{handleSubscribe:this.handleSubscribe,handleSuggestionClose:this.handleSuggestionClose,suggestions:this.state.suggestions}),i.a.createElement(y,{video:e.id,image:e.image,channel:e.channel,publishDate:e.publishDate,userSubscribes:this.state.subscribed,handleSubscribe:this.handleSubscribe}),i.a.createElement(T,{desc:e.description,collapseView:this.state.collapseView,handleShowClick:this.handleShowClick}),i.a.createElement(ut,{video:e.id,userImage:this.props.videoData.userImage.image,commentData:this.props.videoData.commentDetails,userCommentFeelings:this.props.videoData.userCommentFeelings})):i.a.createElement(gt,null,i.a.createElement(y,{video:e.id,image:e.image,channel:e.channel,publishDate:e.publishDate,userSubscribes:this.state.subscribed,handleSubscribe:this.handleSubscribe}),i.a.createElement(T,{desc:e.description,collapseView:this.state.collapseView,handleShowClick:this.handleShowClick}),i.a.createElement(ut,{video:e.id,userImage:this.props.videoData.userImage.image,commentData:this.props.videoData.commentDetails,userCommentFeelings:this.props.videoData.userCommentFeelings}))}}])&&mt(n.prototype,o),r&&mt(n,r),t}();function yt(e){return(yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function xt(e,t){return!t||"object"!==yt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vt(e){return(vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kt(e,t){return(kt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ct=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=xt(this,vt(t).call(this,e))).state={videoData:null,subscribed:null},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kt(e,t)}(t,i.a.Component),n=t,(o=[{key:"render",value:function(){return this.props.videoData?i.a.createElement(bt,{videoData:this.props.videoData,subscribed:this.props.subscribed}):i.a.createElement("div",null)}}])&&wt(n.prototype,o),r&&wt(n,r),t}(),St=function(e,t,n){return console.log(n),'\n  <!DOCTYPE html>\n  <html lang="en">\n    <head>\n      <title>YouTune - Video Details</title>\n      '.concat(e,'\n      <link rel="shortcut icon" href="https://d1ggtrrftyy4ru.cloudfront.net/youtune.png">\n      <link rel="stylesheet" type="text/css" href="https://d1ggtrrftyy4ru.cloudfront.net/reset.css">\n      <link href="https://fonts.googleapis.com/css?family=Roboto:400,500" rel="stylesheet">\n    </head>\n    <body>\n      <div id="root">').concat(t,'</div>\n      <script crossorigin src="https://unpkg.com/react@16/umd/react.production.min.js"><\/script>\n      <script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js"><\/script>\n      <script src="https://d1ggtrrftyy4ru.cloudfront.net/bundle.js"><\/script>\n      <script>\n        ReactDOM.hydrate(\n          React.createElement(VideoDetailsAndComments, ').concat(JSON.stringify(n),"),\n          document.getElementById('root')\n        );\n      <\/script>\n    </body>\n  </html>\n  ")},_t=n(5)(),Et=n(6),It=(n(9),n(11).urlencoded({extended:!1}));_t.use(function(e,t,n){var o=e.headers.origin;return["http://127.0.0.1:3000","http://localhost:3000","http://node-express-proxy-env.kqhqma2x38.us-west-2.elasticbeanstalk.com","http://video-list-proxy-server-dev.us-west-1.elasticbeanstalk.com","http://127.0.0.1:8081","http://localhost:8081"].indexOf(o)>-1&&t.setHeader("Access-Control-Allow-Origin",o),n()}),_t.get("/",function(e,t){var n={};return Et("videos").select().leftJoin("users","videos.channel","users.username").where("videos.id",1).then(function(e){n.videoDetails=e[0]}).then(function(){return Et("comments").select().leftJoin("users","comments.username","users.username").where("comments.videoId",1)}).then(function(e){n.commentDetails=e}).then(function(){return Et("commentfeelings").select().where("commentfeelings.username","testUser")}).then(function(e){n.userCommentFeelings=e}).then(function(){return Et("subscribes").select().where("subscribes.username","testUser")}).then(function(e){n.userSubscribes=e}).then(function(){return Et("users").select().where("users.username","testUser")}).then(function(e){n.userImage=e[0]}).then(function(){return t.status(200).send((e={videoData:n,subscribed:!1},o=new a.ServerStyleSheet,r=i.a.createElement(Ct,e),l=s.a.renderToString(o.collectStyles(r)),c=o.getStyleTags(),St(c,l,e)));var e,o,r,l,c})}),_t.get("/watch/details",function(e,t){var n={};return Et("videos").select().leftJoin("users","videos.channel","users.username").where("videos.id",e.query.id).then(function(e){n.videoDetails=e[0]}).then(function(){return Et("comments").select().leftJoin("users","comments.username","users.username").where("comments.videoId",e.query.id)}).then(function(e){n.commentDetails=e}).then(function(){return Et("commentfeelings").select().where("commentfeelings.username",e.query.currUser)}).then(function(e){n.userCommentFeelings=e}).then(function(){return Et("subscribes").select().where("subscribes.username",e.query.currUser)}).then(function(e){n.userSubscribes=e}).then(function(){return Et("users").select().where("users.username",e.query.currUser)}).then(function(e){n.userImage=e[0]}).then(function(){return t.status(200).send(n)})}),_t.get("/watch/suggestions",function(e,t){return Et.raw("SELECT * FROM users LEFT JOIN (SELECT channel FROM subscribes WHERE username = 'testUser') as subscriptions ON users.username = subscriptions.channel").then(function(n){for(var o=n.rows,i=[],r=[],s=0;s<o.length;s++){var a=o[s].username,l=o[s].image;!!!!o[s].channel||(a===e.query.id||a===e.query.currUser)||i.push({selectedChannel:a,selectedChannelImage:l})}if(i.length<=10)r=i;else for(;r.length<10;){var c=[],u=Math.floor(Math.random()*i.length);-1===c.indexOf(u)&&(c.push(u),r.push(i[u]))}t.status(200).send(r)})}),_t.post("/watch/subscribe",It,function(e,t){return"unsubscribe"===e.body.action?Et("subscribes").where({username:e.body.user,channel:e.body.channel}).del().then(function(){return Et("users").where("username","=",e.body.channel).decrement("subscribers",1)}).then(function(e){t.sendStatus(201)}):Et("subscribes").insert({username:e.body.user,channel:e.body.channel}).then(function(){return Et("users").where("username","=",e.body.channel).increment("subscribers",1)}).then(function(e){t.sendStatus(201)})}),_t.post("/watch/comment",It,function(e,t){var n=(new Date).toUTCString();return Et("comments").insert({commentDate:n,videoId:e.body.videoId,parentId:e.body.parentId,username:e.body.username,text:e.body.text,likes:0,dislikes:0}).returning("id").then(function(e){t.status(201).send(e)})}),_t.post("/watch/commentFeeling",It,function(e,t){return console.log(e.body.action,e.body.feeling),"like"===e.body.action&&"true"===e.body.feeling?Et("commentfeelings").insert({username:e.body.username,commentId:e.body.commentId,feeling:!0}).then(function(){return Et("comments").where("id","=",e.body.commentId).increment("likes",1)}).then(function(){t.status(201).send([e.body.username,e.body.commentId,"like added"])}):"like"===e.body.action&&"false"===e.body.feeling?Et("commentfeelings").where({username:e.body.username,commentId:e.body.commentId,feeling:!0}).del().then(function(){return Et("comments").where("id","=",e.body.commentId).decrement("likes",1)}).then(function(){t.status(201).send([e.body.username,e.body.commentId,"like removed"])}):"dislike"===e.body.action&&"true"===e.body.feeling?Et("commentfeelings").insert({username:e.body.username,commentId:e.body.commentId,feeling:!1}).then(function(){return Et("comments").where("id","=",e.body.commentId).increment("dislikes",1)}).then(function(){t.status(201).send([e.body.username,e.body.commentId,"dislike added"])}):Et("commentfeelings").where({username:e.body.username,commentId:e.body.commentId,feeling:!1}).del().then(function(){return Et("comments").where("id","=",e.body.commentId).decrement("dislikes",1)}).then(function(){t.status(201).send([e.body.username,e.body.commentId,"dislike removed"])})});var Ot=_t,jt=process.env.PORT||8081;Ot.listen(jt,function(){console.log("Listening on ".concat(jt))})}]);